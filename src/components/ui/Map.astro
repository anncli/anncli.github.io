---
import { onMount } from 'astro/jsx-runtime';
const markers = Astro.props.markers;
---

<div id="map" style="height: 100%; width: 100%;"></div>

<script>
  import 'leaflet/dist/leaflet.css';
  import L from 'leaflet';

  onMount(() => {
    const map = L.map('map').setView([48.8566, 2.3522], 4);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    const markers = Astro.props.markers;
    markers.forEach(({ city, lat, lng, sentence }) => {
      L.marker([lat, lng])
        .addTo(map)
        .bindPopup(`<strong>${city}</strong><br>${sentence}`);
    });
  });
</script>
